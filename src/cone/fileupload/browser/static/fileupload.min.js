var cone_fileupload=function(exports,$){"use strict";function show_file(e,l){e.preventDefault(),bdajax.path({path:bdajax.parsepath(l),target:l,event:"contextchanged:#layout"}),bdajax.trigger("contextchanged","#layout",l)}class Fileupload{static initialize(e){let l=$("#fileupload",e);l.length&&new Fileupload(l)}constructor(elem){this.elem=elem,elem.fileupload({sequentialUploads:!0,messages:fileupload_i18n_messages});let accept_file_types=elem.data("accept_file_types");accept_file_types&&elem.fileupload("option",{acceptFileTypes:eval(accept_file_types)}),this.add_files_handle=this.add_files_handle.bind(this),$("#toolbaraction-add-files",elem).off().on("click",this.add_files_handle),this.load_existing()}add_files_handle(e){e.preventDefault(),$("input:file",this.elem).click()}load_existing(){this.elem.addClass("fileupload-processing"),$.ajax({url:this.elem.data("url"),dataType:"json",context:this.elem[0]}).always((function(){$(this).removeClass("fileupload-processing")})).done((function(e){$(this).fileupload("option","done").call(this,$.Event("done"),{result:e})}))}}return $((function(){bdajax.register(Fileupload.initialize,!0)})),exports.Fileupload=Fileupload,exports.show_file=show_file,Object.defineProperty(exports,"__esModule",{value:!0}),exports}({},jQuery);
